#!/usr/bin/env nu

def main [] {}

def "main commit" [branch: string, msg: string] {
  jj commit -m $msg
  jj bookmark create $branch -r @-
  jj git push --allow-new
}

def "main list" [] {
  jj git fetch
  jj bookmark list
  jj rebase -d main@origin
}

def "main cleanup" [branch: string] {
  jj bookmark --delete $branch
  jj git push --deleted
}
